<!DOCTYPE html>
<html lang="en">
<!--
;===========================================
; Title: Assignment 8.4
; Author: Emily Richter
; Date: 1 February 2020
; Description: Follow instructions to show
; understanding of
;===========================================
-->

<head>
  <meta charset="UTF-8">
  <title>Assignment 8.4</title>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <!-- you will need to the href to point to your root directories css file -->
  <link rel="stylesheet" href="../site.css">

  <style type="text/css">
    #employee tbody tr:hover {
      cursor: pointer;
      background-color: #ffff99;
    }
  </style>
</head>
<body>

<div id="emps"></div>

<script type="text/javascript">
  function employee(id, firstName, lastName, title){
    this.id = id;
    this.firstName = first;
    this.lastName = last;
    this.title = title;
  };

  var employeeList = [
    new employee (1, "Michael", "Scott", "Regional Manager"),
    new employee (2, "Dwight", "Schrute", "Assistant to the Regional Manager"),
    new employee (3, "Jim", "Halpert", "Salesman"),
    new employee (4, "Pam", "Beesly", "Receptionist"),
    new employee (5, "Angela", "Martin", "Head Accountant")
  ];

  function getEmployee(id){
employeeList.forEach(function(employee){
  if(id === employee.id){
    alert(`${employee.id} ${employee.firstName} ${employee.lastName} ${employee.title}`);}
  });}

  var output = "<h2>Employees</h2><table>";
  for (var i = 0; i < employeeList.length; i++){
    output += "<tr><td class=tableId>" + employeeList[i].id + "</td><td>" + employeeList[i].firstName + "</td><td>" + employeeList[i].lastName + "</td><td>" + employeeList[i].title + "</td></tr>";
  }
  output += "</table>";

  document.getElementById("emps").innerHTML = output;


  $(document).ready(function(){

    $(".tableId").click(function(event) {
    event.preventDefault();

       var empId = $(this).text();

       var empType = $(this).closest("td").next().text();

       alert("{employee_id: " + empId + ", employee_name:" + empName + ", employee_type: " + empType + "}");
  });

  // jQuery onClick event
  $(function () {
    $("tableId").click(function (event) {
      event.preventDefault();
      var findEmployee = $(this).find("td:first").html();
      getEmployee(findEmployee);
  });

  });

});
</script>
</body>
</html>
